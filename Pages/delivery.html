<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Delivery Page</title>
    <link rel="stylesheet" href="./style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">

</head>
<body>

<nav class="navbar navbar-expand-lg bg-body-tertiary">
  <div class="container-fluid">
    <a class="navbar-brand" href="#"><img src="" alt=""></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="index.html">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="products.html">Products</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="contactus.html">Contact Us</a>
        </li>
        
    </div>
  </div>
</nav>

<div class="container">
    <img src="../img/Logo.png" alt="Milkee Foods Logo" class="logo"> 

    <h1>Delivery Details</h1>

    
    <form id="deliveryForm" action="process_delivery.php" method="POST">
      <label for="name">Full Name</label>
      <input type="text" id="name" name="name" placeholder="Enter your full name" required>

      <label for="address">Delivery Address</label>
      <textarea id="address" name="address" rows="3" placeholder="Enter your delivery address" required></textarea>

      <label for="phone">Phone Number</label>
      <input type="tel" id="phone" name="phone" placeholder="Enter your phone number" required>

      <h3>Order Products</h3>

      <div class="product-item">
        <label for="product">Select Product</label>
        <select id="product">
          <option value="Yoghurt">Yoghurt</option>
          <option value="Watalappan">Watalappan</option>
          <option value="Biscuits">Biscuits</option>
          <option value="Pudding">Pudding</option>
          <option value="Custard">Custard</option>
          <option value="Jelly Pudding">Jelly Pudding</option>
          <option value="Caramel Pudding">Caramel Pudding</option>
          <option value="Yoghurt Drinks">Yoghurt Drinks</option>
          <option value="Fruit Drinks">Fruit Drinks</option>
        </select>

        <label for="quantity">Quantity</label>
        <input type="number" id="quantity" min="1" value="1">

        <button type="button" id="addProduct">Add Product</button>
      </div>

      <ul id="orderList" class="order-list"></ul>

      <button type="submit">Submit Delivery</button>
    </form>

    
    <div id="deliveryPreview" class="preview">
      <h2>Delivery Preview</h2>
      <p><strong>Name:</strong> <span id="previewName"></span></p>
      <p><strong>Address:</strong> <span id="previewAddress"></span></p>
      <p><strong>Phone:</strong> <span id="previewPhone"></span></p>
      <h3>Products:</h3>
      <ul id="previewProducts"></ul>
      <button id="confirmBtn" class="btn-confirm">✅ Confirm & Send</button>
      <button id="editBtn" class="btn-edit">✏️ Edit</button>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const addBtn = document.getElementById("addProduct");
      const productSelect = document.getElementById("product");
      const quantityInput = document.getElementById("quantity");
      const orderList = document.getElementById("orderList");
      const form = document.getElementById("deliveryForm");

      const previewBox = document.getElementById("deliveryPreview");
      const previewName = document.getElementById("previewName");
      const previewAddress = document.getElementById("previewAddress");
      const previewPhone = document.getElementById("previewPhone");
      const previewProducts = document.getElementById("previewProducts");
      const confirmBtn = document.getElementById("confirmBtn");
      const editBtn = document.getElementById("editBtn");

      
      addBtn.addEventListener("click", function () {
        const product = productSelect.value;
        const qty = quantityInput.value;

        if (qty > 0) {
          const li = document.createElement("li");
          li.textContent = `${product} - Quantity: ${qty}`;

          const removeBtn = document.createElement("button");
          removeBtn.textContent = "❌ Remove";
          removeBtn.classList.add("remove-btn");
          removeBtn.addEventListener("click", function () {
            li.remove();
          });

          li.appendChild(removeBtn);
          orderList.appendChild(li);

          quantityInput.value = 1;
        } else {
          alert("Please enter a valid quantity.");
        }
      });

      
      form.addEventListener("submit", function (e) {
        e.preventDefault();

        previewName.textContent = document.getElementById("name").value;
        previewAddress.textContent = document.getElementById("address").value;
        previewPhone.textContent = document.getElementById("phone").value;

        previewProducts.innerHTML = "";
        const items = orderList.querySelectorAll("li");
        if (items.length === 0) {
          previewProducts.innerHTML = "<li>No products added</li>";
        } else {
          items.forEach(item => {
            const li = document.createElement("li");
            li.textContent = item.firstChild.textContent;
            previewProducts.appendChild(li);
          });
        }

        previewBox.style.display = "block";
      });

      confirmBtn.addEventListener("click", function () {
        form.submit();
      });


      editBtn.addEventListener("click", function () {
        previewBox.style.display = "none";
      });
    });
  </script>
</body>
</html>